const submitBtn=document.querySelector('input[type="submit"]'),resolvedUrls=[],allUrlsWrapper=document.querySelector("ul.urls"),allUrls=allUrlsWrapper.querySelectorAll("li");async function shortenUrl(longUrl){const obj={longUrl:longUrl},request=await fetch("/api/url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(obj)});if(401==request.status)return console.log("ERROR");const result=await request.json();resolvedUrls.push(result),outputResult(result)}function initializeEventListener(){}function outputResult(result){const ele=document.createElement("li");ele.innerHTML=`\n        <li>\n        <span class="long-url">${result.longUrl}</span>\n        <span class="short-url">${result.shortUrl}</span>\n        <span class="copy">Copy</span>\n         </li>\n        `;const copyBtn=ele.querySelector(".copy");copyBtn.addEventListener("click",()=>{const selection=window.getSelection(),range=document.createRange();range.selectNodeContents(ele.querySelector(".short-url")),selection.removeAllRanges(),selection.addRange(range);try{document.execCommand("copy"),selection.removeAllRanges();const originalText=copyBtn.textContent;copyBtn.textContent="Copied!",setTimeout(()=>{copyBtn.textContent=originalText},1200)}catch(err){console.log(err)}}),allUrlsWrapper.prepend(ele)}submitBtn.addEventListener("click",e=>{e.preventDefault();const UrlToBeShortened=document.querySelector("input.urlShort").value;shortenUrl(UrlToBeShortened)});